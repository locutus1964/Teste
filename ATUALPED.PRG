CLEAR
CLOSE ALL
SET TALK OFF
SELE 0
USE CABECNF ORDER P_NNF
SELE 0
USE NFSEMPED
INDEX ON NNF TAG XNNF
SELE 0
USE PEDID ORDER F_PED
SELE NFSEMPED
GO TOP
DO WHILE ! EOF()
  IF SEEK(NNF, 'CABECNF')
    SELE PEDID
    IF SEEK(CABECNF->PED, 'PEDID')
      MPED = PED
      DO WHILE ! EOF() .AND. MPED = PED 
        REPLACE SAL WITH 0
        SKIP
      ENDDO
    ENDIF  
  ENDIF  
  SELE NFSEMPED 
  SKIP  
ENDDO  
CLOSE ALL
SET TALK ON